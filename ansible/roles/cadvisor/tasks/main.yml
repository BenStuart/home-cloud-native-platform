---

# sudo docker run \
  # --volume=/:/rootfs:ro \
  # --volume=/var/run:/var/run:ro \
  # --volume=/sys:/sys:ro \
  # --volume=/var/lib/docker/:/var/lib/docker:ro \
  # --volume=/dev/disk/:/dev/disk:ro \
  # --publish=8080:8080 \
  # --detach=true \
  # --name=cadvisor \
  # google/cadvisor:latest
- name: "Run image {{ cadvisor.image.name }}:{{ cadvisor.image.tag }} as container {{ cadvisor.container.name }}"
  docker_container:
    name: "{{ cadvisor.container.name }}"
    image: "{{ cadvisor.image.name }}:{{ cadvisor.image.tag }}"
    publish_ports:
      - "{{ cadvisor.container.ports.http }}:8080"
    recreate: yes
    restart: "{{ cadvisor.container.restart.policy }}"
    state: started
    volumes:
      - /:/rootfs:ro
      - /var/run:/var/run:ro
      - /sys:/sys:ro
      - /var/lib/docker/:/var/lib/docker:ro
      - /dev/disk/:/dev/disk:ro
